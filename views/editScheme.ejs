<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Edit Scheme</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/editScheme.css">
</head>
<body>
  <div class="edit-scheme-container">
    <h2>Edit Scheme</h2>
    <form action="/admin/edit-scheme/<%= scheme._id %>" method="POST" enctype="multipart/form-data" class="edit-scheme-form">

      <!-- Scheme Title -->
      <div class="form-group">
        <label for="schemeName">Title</label>
        <input type="text" id="schemeName" name="schemeName" value="<%= scheme.schemeName || '' %>">
      </div>

      <!-- Scheme Description -->
      <div class="form-group">
        <label for="schemeDescription">Description</label>
        <textarea id="schemeDescription" name="schemeDescription"><%= scheme.schemeDescription || '' %></textarea>
      </div>

      <!-- Scheme Video Link -->
      <div class="form-group">
        <label for="videoLink">Video Link (optional)</label>
        <input type="url" id="videoLink" name="videoLink" value="<%= scheme.videoLink || '' %>">
      </div>

      <h3>Eligibility Criteria</h3>

      <div class="form-group">
        <label for="gender">Gender</label>
        <select name="gender" id="gender">
          <option value="">-- Select Gender --</option>
          <option value="male" <%= scheme.gender === 'male' ? 'selected' : '' %>>Male</option>
          <option value="female" <%= scheme.gender === 'female' ? 'selected' : '' %>>Female</option>
          <option value="all" <%= scheme.gender === 'all' ? 'selected' : '' %>>All / Other</option>
        </select>
      </div>

      <div class="form-group">
        <label for="maritalStatus">Marital Status</label>
        <select name="maritalStatus" id="maritalStatus">
          <option value="">-- Select Marital Status --</option>
          <option value="single" <%= scheme.maritalStatus === 'single' ? 'selected' : '' %>>Single</option>
          <option value="married" <%= scheme.maritalStatus === 'married' ? 'selected' : '' %>>Married</option>
          <option value="other" <%= scheme.maritalStatus === 'other' ? 'selected' : '' %>>Other</option>
        </select>
      </div>

      <div class="form-group">
        <label for="income">Income</label>
        <input type="number" id="income" name="income" value="<%= scheme.income || '' %>">
      </div>

      <div class="form-group">
        <label for="occupation">Occupation</label>
        <input type="text" id="occupation" name="occupation" value="<%= scheme.occupation || '' %>">
      </div>

      <div class="form-group">
        <label for="educationLevel">Education Level</label>
        <input type="text" id="educationLevel" name="educationLevel" value="<%= scheme.educationLevel || '' %>">
      </div>

      <div class="form-group">
        <label for="state">State</label>
        <input type="text" id="state" name="state" value="<%= scheme.state || '' %>">
      </div>

      <div class="form-group">
        <label for="ruralOrUrban">Rural or Urban</label>
        <select name="ruralOrUrban" id="ruralOrUrban">
          <option value="">-- Select --</option>
          <option value="rural" <%= scheme.ruralOrUrban === 'rural' ? 'selected' : '' %>>Rural</option>
          <option value="urban" <%= scheme.ruralOrUrban === 'urban' ? 'selected' : '' %>>Urban</option>
          <option value="both" <%= scheme.ruralOrUrban === 'both' ? 'selected' : '' %>>Both</option>
        </select>
      </div>

      <!-- Booleans: keep hidden inputs so server always receives a value -->
      <div class="form-group">
        <input type="hidden" name="hasGirlChild" value="false">
        <label>
          <input type="checkbox" name="hasGirlChild" value="true" <%= scheme.hasGirlChild ? 'checked' : '' %> > Has Girl Child
        </label>
      </div>

      <div class="form-group">
        <input type="hidden" name="isFarmer" value="false">
        <label>
          <input type="checkbox" name="isFarmer" value="true" <%= scheme.isFarmer ? 'checked' : '' %> > Is Farmer
        </label>
      </div>

      <div class="form-group">
        <input type="hidden" name="isPregnantOrMother" value="false">
        <label>
          <input type="checkbox" name="isPregnantOrMother" value="true" <%= scheme.isPregnantOrMother ? 'checked' : '' %> > Is Pregnant or Mother
        </label>
      </div>

      <div class="form-group">
        <input type="hidden" name="isDisabled" value="false">
        <label>
          <input type="checkbox" name="isDisabled" value="true" <%= scheme.isDisabled ? 'checked' : '' %> > Is Disabled
        </label>
      </div>

      <!-- show current image if exists -->
      <% if (scheme.imageUrl) { %>
        <div class="current-image">
          <p>Current image:</p>
          <img src="<%= scheme.imageUrl %>" alt="scheme image" style="max-width:200px;display:block;margin-bottom:8px;">
        </div>
      <% } %>

      <div class="form-group">
        <label for="image">Upload Scheme Image (optional)</label>
        <input type="file" id="image" name="image" accept="image/*">
      </div>

      <button type="submit">Update Scheme</button>
    </form>

    <div class="back-link">
      <a href="/admin/dashboard">‚Üê Back to Admin Dashboard</a>
    </div>
  </div>
</body>
</html>
